---
title: Update existing images
description: 'Update existing images'
icon: 'pen'
---

Once image information is stored on the servers where the Wesog database is maintained, it is possible to update this data As with the previous endpoint's output, the response codes you may receive are the same as those defined for the single-image update endpoint.ithout needing to delete existing images, thanks to this endpoint. This allows modifying the metadata associated with images, such as their title, description, tags, etc., without needing to re-upload the complete image.

Like with deletion and upload operations, updating can be performed on a single image or on a **batch** of images (recommended for updating large quantities of images). For this purpose, two different endpoints have been implemented, as explained below:

## Replace a single image (`PUT /imgs/{item_id}`)
This endpoint allows updating the metadata of a specific image using its unique identifier (`item_id`).

### Parameters
In this case, the `item_id`, which is the unique identifier of the image to be updated, must be included in the URL of the endpoint.

The other parameters that can be sent as query parameters are:

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `wait` | Boolean | No | Enables 'Synchronous' mode. When true, waits until operation completes (default: false) |
| `urgent` | Boolean | No | Enqueue the operation associated at head of operation's queue |
| `strict` | Boolean | No | Enables 'Strict' mode. When true, fails if image ID doesn't exist. When false, ignores missing IDs (default: false) |

Additionally, in the body section a JSON object is expected that contains the new values for the image fields. This allows updating only the necessary metadata without needing to re-upload the complete image.

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `src` | String | Yes | URL of the image (used as source for the AI) |
| `url_img_watermark` | String | No | URL of the watermarked image |
| `url_img_thumbnail` | String | No | URL of the thumbnail image |
| `title` | String | No | Title of the image |
| `headline` | String | No | Short text describing the image |
| `caption` | String | No | Long text describing the image |
| `alt_text` | String | No | Alternative text for accessibility |
| `ai_generated` | Boolean | No | Indicates if image was generated by AI |
| `model_release` | Boolean | No | Whether model release is available |
| `property_release` | Boolean | No | Whether property release is available |
| `nsfw` | Boolean | No | Whether content is not safe for work |
| `status` | String | No | Current status: Active, Withdrawn, Reserved, RDA Only |
| `date` | String | No | Date of image creation (YYYY-MM-DD format) |
| `location` | String | No | Detailed location description |
| `city` | String | No | City name |
| `country` | String | No | Country name |
| `event` | String | No | Event name |
| `author` | String | No | Creator name |
| `provider` | String | No | Provider identifier |
| `shot` | String | No | Type of photography shot |
| `scene` | String | No | Scene description |
| `technique` | String | No | Technique used in creation |
| `medium` | String | No | Medium used in creation |
| `keywords` | Array | No | Keywords describing the image |
| `categories` | Array | No | General categories |
| `collections` | Array | No | Collections the image belongs to |

As can be verified, most fields are optional, since in case they are not directly indicated, an incremental update will be performed, maintaining the existing values that are not modified. This allows great flexibility when updating image metadata without needing to send all the information each time.

### Responses
Updating an image internally triggers an operation whose status can be queried. Accordingly, the endpoint returns all information associated with that operation, enabling the client to identify the generated operation ID and check its status thereafter. In this way, in case the update has been accepted but not completed, only a message with the following format will be returned:
```json
{
  "op_id": 12345,
  "status": "accepted",
  "message": "Image update accepted, processing in progress."
}
```
While if the update is performed directly, all information related to the operation that was created to carry out the image update will be sent. This information includes the following fields:

| Field | Type  | Description |
|-----------|------|-------------|
| `op_id` | Number | Unique identifier of the operation |
| `method` | String | Type of operation: add, upd, del, or multiple |
| `resource` | String | Resource being operated on (e.g., images) |
| `num_total` | Number | Total number of items in the operation |
| `num_good` | Number | Number of items successfully processed |
| `num_bad` | Number | Number of items that failed to process |
| `is_started` | Boolean | Whether the operation has started execution |
| `all_good` | Boolean | Whether all items were successfully processed |
| `do_wait` | Boolean | Whether the operation was executed in synchronous mode |
| `do_urgent` | Boolean | Whether the operation was prioritized in the queue |
| `do_strict` | Boolean | Whether strict mode was enabled for the operation |
| `idle_ms` | Number | Time in milliseconds the operation waited before starting |
| `exec_ms` | Number | Time in milliseconds the operation took to execute |
| `created_at` | String | Timestamp when the operation was created |
| `started_at` | String | Timestamp when the operation started execution |
| `finished_at` | String | Timestamp when the operation finished |
| `errors` | Array | List of errors that occurred during processing |

### Code Responses
| Status Code | Description | Response Body |
|-------------|-------------|---------------|
| `200` | OK - Resource successfully updated | Operation details |
| `202` | Accepted - Request accepted for processing | Operation ID for tracking |
| `422` | Unprocessable Entity - Validation errors | Error details |
| `500` | Internal Server Error - Unexpected server error | Error message |

### Example
```bash
curl --request PUT \
  --url https://api.wesog.com/imgs/{item_id} \
  --header 'API-Key: <api-key>' \
  --header 'Content-Type: application/json' \
  --data '{
  "url_img_watermark": "https://cdn.example.com/image/wm.jpg",
  "url_img_thumbnail": "https://cdn.example.com/image/thumb.jpg",
  "title": "image123",
  "headline": "Sunset over the Hudson River",
  "caption": "A vibrant orange sunset reflecting on the river with the city skyline in silhouette.",
  "alt_text": "<string>",
  "ai_generated": true,
  "model_release": true,
  "property_release": true,
  "nsfw": true,
  "status": "Active",
  "date": "2024-10-19",
  "location": "123 Main St, near Central Park",
  "city": "New York",
  "country": "United States",
  "event": "Oscar awards 2024",
  "author": "Jane Doe",
  "provider": "Acme Inc.",
  "shot": "Portrait",
  "scene": "Town square",
  "technique": "Drawing",
  "medium": "Oil on canvas",
  "keywords": [
    "Tree",
    "Dog",
    "Ball",
    "Water"
  ],
  "categories": [
    "Sport",
    "Fashion",
    "Politics"
  ],
  "collections": [
    "Steet pics",
    "Exclusive"
  ],
  "src": "<string>"
}'
```
## Replace multiple images (`PUT /imgs`)
This endpoint allows you to replace data for multiple images at once. Itâ€™s useful for efficiently updating large quantities of images.


### Parameters
This endpoint maintains the same `Query Parameters` as the previous endpoint, but also allows for a request body containing the data of the images to be updated.
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `wait` | Boolean | No | Enables 'Synchronous' mode. When true, waits until operation completes (default: false) |
| `strict` | Boolean | No | Enables 'Strict' mode. When true, fails if image ID doesn't exist. When false, ignores missing IDs (default: false) |
| `urgent` | Boolean | No | Enables 'Faster' mode. When true, operation is prioritized in queue (default: false) |
| `lang` | String | No | Language for tags (default: "en", possible values: "en", "es", "fr", "de", "pt", "ru") |

Since this endpoint is specifically designed to allow for the update of multiple images at once, the request body must include a list of JSON objects, each containing an `id` field with the identifier of the image to be updated, along with the fields to be modified. For example:

```json
[
  {
    "id": "image123",
    "headline": "Updated sunset over the Hudson River",
    "caption": "An updated vibrant orange sunset reflecting on the river."
  },
  {
    "id": "image456", 
    "status": "Withdrawn",
    "keywords": ["landscape", "evening", "city"]
  },
  {
    "id": "image789",
    "author": "John Smith",
    "location": "Central Park, Manhattan"
  }
]
```
Thus, the structure of the JSON objects that should comprise the list is:
| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | String/Number | Yes | Unique identifier of the image to update |
| Other fields | Various | No | Any field from the image schema that needs to be updated |

### Responses
Since when requesting the update of multiple images, internally a single operation is created that encompasses the update process of all elements, the response format generated by the Wesog Search service is the same as in the case of the individual image update endpoint. Nevertheless, for completeness, the table of fields returned in the response is included here:

The responses received from this endpoint have the same format as in the case of the previous endpoint exactly:
| Field | Type  | Description |
|-----------|------|-------------|
| `op_id` | Number | Unique identifier of the operation |
| `method` | String | Type of operation: add, upd, del, or multiple |
| `resource` | String | Resource being operated on (e.g., images) |
| `num_total` | Number | Total number of items in the operation |
| `num_good` | Number | Number of items successfully processed |
| `num_bad` | Number | Number of items that failed to process |
| `is_started` | Boolean | Whether the operation has started execution |
| `all_good` | Boolean | Whether all items were successfully processed |
| `do_wait` | Boolean | Whether the operation was executed in synchronous mode |
| `do_urgent` | Boolean | Whether the operation was prioritized in the queue |
| `do_strict` | Boolean | Whether strict mode was enabled for the operation |
| `idle_ms` | Number | Time in milliseconds the operation waited before starting |
| `exec_ms` | Number | Time in milliseconds the operation took to execute |
| `created_at` | String | Timestamp when the operation was created |
| `started_at` | String | Timestamp when the operation started execution |
| `finished_at` | String | Timestamp when the operation finished |
| `errors` | Array | List of errors that occurred during processing |

### Code Responses
As with the previous endpointâ€™s output, the response codes you may receive are the same as those defined for the single-image deletion endpoint.
| Status Code | Description | Response Body |
|-------------|-------------|---------------|
| `200` | OK - Resource successfully updated | Operation details |
| `202` | Accepted - Request accepted for processing | Operation ID for tracking |
| `422` | Unprocessable Entity - Validation errors | Error details |
| `500` | Internal Server Error - Unexpected server error | Error message |

### Example

```bash
curl --request PUT \
  --url https://api.wesog.com/imgs \
  --header 'API-Key: <api-key>' \
  --header 'Content-Type: application/json' \
  --data '[
  {
    "url_img_watermark": "https://cdn.example.com/image/wm.jpg",
    "url_img_thumbnail": "https://cdn.example.com/image/thumb.jpg",
    "title": "image123",
    "headline": "Sunset over the Hudson River",
    "caption": "A vibrant orange sunset reflecting on the river with the city skyline in silhouette.",
    "alt_text": "<string>",
    "ai_generated": true,
    "model_release": true,
    "property_release": true,
    "nsfw": true,
    "status": "Active",
    "date": "2024-10-19",
    "location": "123 Main St, near Central Park",
    "city": "New York",
    "country": "United States",
    "event": "Oscar awards 2024",
    "author": "Jane Doe",
    "provider": "Acme Inc.",
    "shot": "Portrait",
    "scene": "Town square",
    "technique": "Drawing",
    "medium": "Oil on canvas",
    "keywords": [
      "Tree",
      "Dog",
      "Ball",
      "Water"
    ],
    "categories": [
      "Sport",
      "Fashion",
      "Politics"
    ],
    "collections": [
      "Steet pics",
      "Exclusive"
    ],
    "id": "<string>",
    "src": "<string>"
  }
]'
```